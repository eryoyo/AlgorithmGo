//ç»Ÿè®¡æ‰€æœ‰å°äºéè´Ÿæ•´æ•° n çš„è´¨æ•°çš„æ•°é‡ã€‚ 
//
// 
//
// ç¤ºä¾‹ 1ï¼š 
//
// è¾“å…¥ï¼šn = 10
//è¾“å‡ºï¼š4
//è§£é‡Šï¼šå°äº 10 çš„è´¨æ•°ä¸€å…±æœ‰ 4 ä¸ª, å®ƒä»¬æ˜¯ 2, 3, 5, 7 ã€‚
// 
//
// ç¤ºä¾‹ 2ï¼š 
//
// è¾“å…¥ï¼šn = 0
//è¾“å‡ºï¼š0
// 
//
// ç¤ºä¾‹ 3ï¼š 
//
// è¾“å…¥ï¼šn = 1
//è¾“å‡ºï¼š0
// 
//
// 
//
// æç¤ºï¼š 
//
// 
// 0 <= n <= 5 * 106 
// 
// Related Topics æ•°ç»„ æ•°å­¦ æšä¸¾ æ•°è®º 
// ğŸ‘ 721 ğŸ‘ 0

/*
 * è´¨æ•°åˆç§°ç´ æ•°ï¼ŒæŒ‡çš„æ˜¯æŒ‡åœ¨å¤§äº 1 çš„è‡ªç„¶æ•°ä¸­ï¼Œé™¤äº† 1 å’Œå®ƒæœ¬èº«ä»¥å¤–ä¸å†æœ‰å…¶ä»–å› æ•°çš„è‡ªç„¶
æ•°ã€‚å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œæ¯ä¸€ä¸ªæ•°éƒ½å¯ä»¥åˆ†è§£æˆè´¨æ•°çš„ä¹˜ç§¯ã€‚

 é¢˜è§£
åŸƒæ‹‰æ‰˜æ–¯ç‰¹å°¼ç­›æ³•ï¼ˆSieve of Eratosthenesï¼Œç®€ç§°åŸƒæ°ç­›æ³•ï¼‰æ˜¯éå¸¸å¸¸ç”¨çš„ï¼Œåˆ¤æ–­ä¸€ä¸ªæ•´æ•°æ˜¯
å¦æ˜¯è´¨æ•°çš„æ–¹æ³•ã€‚å¹¶ä¸”å®ƒå¯ä»¥åœ¨åˆ¤æ–­ä¸€ä¸ªæ•´æ•° n æ—¶ï¼ŒåŒæ—¶åˆ¤æ–­æ‰€å°äº n çš„æ•´æ•°ï¼Œå› æ­¤éå¸¸é€‚åˆè¿™
é“é¢˜ã€‚å…¶åŸç†ä¹Ÿååˆ†æ˜“æ‡‚ï¼šä» 1 åˆ° n éå†ï¼Œå‡è®¾å½“å‰éå†åˆ° mï¼Œåˆ™æŠŠæ‰€æœ‰å°äº n çš„ã€ä¸”æ˜¯ m çš„å€
æ•°çš„æ•´æ•°æ ‡ä¸ºå’Œæ•°ï¼›éå†å®Œæˆåï¼Œæ²¡æœ‰è¢«æ ‡ä¸ºå’Œæ•°çš„æ•°å­—å³ä¸ºè´¨æ•°ã€‚
 */

#include <vector>
#include<cmath>

using namespace std;

//leetcode submit region begin(Prohibit modification and deletion)
class Solution {
public:
    int countPrimes(int n) {
//        if(n <= 2){
//            return 0;
//        }
//        vector<bool> prime(n, true);
//        int count = n - 2;//å»æ‰ä¸æ˜¯è´¨æ•°çš„1
//        for(int i = 2; i < n; ++i){
//            if(prime[i]){
//                for(int j = 2 * i; j < n; j += i){
//                    if(prime[j]){
//                        prime[j] = false;
//                        --count;
//                    }
//                }
//            }
//        }
//        return count;

        //åˆ©ç”¨è´¨æ•°çš„ä¸€äº›æ€§è´¨ï¼Œæˆ‘ä»¬å¯ä»¥è¿›ä¸€æ­¥ä¼˜åŒ–è¯¥ç®—æ³•ã€‚
        if(n <= 2){
            return 0;
        }
        vector<bool> prime(n, true);
        int i = 3;
        int sqrtn = sqrt(n);
        int count = n / 2;//å¶æ•°ä¸€å®šä¸æ˜¯è´¨æ•°
        while(i <= sqrtn){//æœ€å°è´¨å› å­ä¸€å®šå°äºç­‰äºå¼€æ–¹æ•°
            for(int j = i * i; j < n; j += 2 * i){// é¿å…å¶æ•°å’Œé‡å¤éå†
                if(prime[j]){
                    --count;
                    prime[j] = false;
                }
            }
            do{
                i += 2;
            }while(i <= sqrtn && !prime[i]);// é¿å…å¶æ•°å’Œé‡å¤éå†
        }
        return count;
    }
};
//leetcode submit region end(Prohibit modification and deletion)
